<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>NexEd - Career Path Generator</title>
    <style>
      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }

      body {
        font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto,
          sans-serif;
        background: #f5f7fa;
        min-height: 100vh;
        padding: 20px;
      }

      .container {
        max-width: 1200px;
        margin: 0 auto;
      }

      .header {
        display: flex;
        align-items: center;
        justify-content: space-between;
        margin-bottom: 30px;
        padding: 20px 40px;
        background: white;
        border-radius: 15px;
        box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);
      }

      .logo-section {
        display: flex;
        align-items: center;
        gap: 12px;
      }

      .logo {
        width: 40px;
        height: 40px;
        border-radius: 8px;
        display: flex;
        align-items: center;
        justify-content: center;
        color: white;
        font-weight: bold;
        font-size: 1.2rem;
      }

      .logo img {
        width: 40px;
      }

      .logo-text {
        font-size: 32px; /* adjust size */
        font-weight: bold; /* bold for logo look */
        font-family: Arial, sans-serif;
      }

      .logo-text .nex {
        color: #197dbb; /* blue for Nex */
      }

      .logo-text .ed {
        color: #000000; /* black for Ed */
      }

      .user-info {
        display: flex;
        align-items: center;
        gap: 10px;
        color: #197dbb;
        font-weight: 600;
      }

      .user-avatar {
        width: 32px;
        height: 32px;
        border-radius: 50%;
        background: #197dbb;
        display: flex;
        align-items: center;
        justify-content: center;
        color: white;
        font-size: 0.9rem;
      }

      .header a {
        text-decoration: none;
      }

      .main-content {
        background: #e6f0ff;
        border-radius: 25px;
        padding: 40px;
        box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
      }

      .main-content h1{
        text-align: center;
      }

      .page-title {
        color: #3d52d5;
        font-size: 2.2rem;
        font-weight: 700;
        margin-bottom: 30px;
        text-align: left;
      }

      .search-section {
        background: white;
        border-radius: 20px;
        padding: 25px;
        margin-bottom: 30px;
        box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
      }

      .search-container {
        display: flex;
        gap: 15px;
        align-items: center;
      }

      .search-input {
        flex: 1;
        padding: 15px 20px;
        border: 2px solid #e5e5e5;
        border-radius: 15px;
        font-size: 1.1rem;
        outline: none;
        transition: border-color 0.3s ease;
      }

      .search-input:focus {
        border-color: #3d52d5;
      }

      .search-btn {
        background: #f4b942;
        color: white;
        border: none;
        padding: 15px 30px;
        border-radius: 15px;
        font-size: 1.1rem;
        font-weight: 600;
        cursor: pointer;
        transition: all 0.3s ease;
      }

      .search-btn:hover {
        background: #e6a832;
        transform: translateY(-2px);
      }

      .content-grid {
        display: grid;
        grid-template-columns: 1fr;
        gap: 30px;
        margin-top: 30px;
      }

      .career-details {
        background: white;
        border-radius: 20px;
        padding: 35px;
        box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
      }

      .career-header {
        margin-bottom: 30px;
      }

      .career-title {
        color: #3d52d5;
        font-size: 2rem;
        font-weight: 700;
        margin-bottom: 15px;
      }

      .career-description {
        color: #666;
        font-size: 1.1rem;
        line-height: 1.6;
        margin-bottom: 25px;
      }

      .roadmap-section {
        margin-bottom: 40px;
      }

      .section-title {
        color: #3d52d5;
        font-size: 1.5rem;
        font-weight: 700;
        margin-bottom: 20px;
      }

      .roadmap-container {
        background: #f8f9fa;
        border-radius: 15px;
        padding: 25px;
        margin-bottom: 20px;
      }

      .roadmap-title {
        text-align: center;
        font-weight: 600;
        margin-bottom: 20px;
        color: #333;
      }

      .roadmap-steps {
        display: flex;
        justify-content: space-between;
        align-items: center;
        flex-wrap: wrap;
        gap: 15px;
      }

      .roadmap-step {
        background: #3d52d5;
        color: white;
        padding: 15px 20px;
        border-radius: 12px;
        text-align: center;
        flex: 1;
        min-width: 140px;
        font-size: 0.9rem;
        font-weight: 500;
        position: relative;
      }

      .roadmap-step::after {
        content: "→";
        position: absolute;
        right: -12px;
        top: 50%;
        transform: translateY(-50%);
        color: #3d52d5;
        font-weight: bold;
        font-size: 1.2rem;
      }

      .roadmap-step:last-child::after {
        display: none;
      }

      .courses-sidebar {
        background: white;
        border-radius: 20px;
        padding: 25px;
        box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
        height: fit-content;
      }

      .sidebar-title {
        color: #3d52d5;
        font-size: 1.3rem;
        font-weight: 700;
        margin-bottom: 20px;
        text-align: center;
      }

      .course-card {
        background: #3d52d5;
        color: white;
        padding: 20px;
        border-radius: 15px;
        margin-bottom: 15px;
        text-align: center;
        font-weight: 600;
        font-size: 1.1rem;
        cursor: pointer;
        transition: all 0.3s ease;
        text-decoration: none;
        display: block;
      }

      .course-card:hover {
        background: #3a5ce6;
        transform: translateY(-3px);
        box-shadow: 0 8px 20px rgba(74, 108, 247, 0.3);
      }

      .skills-section {
        margin-bottom: 30px;
      }

      .skills-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
        gap: 15px;
      }

      .skill-category {
        background: #f8f9fa;
        border-radius: 12px;
        padding: 20px;
      }

      .skill-category h4 {
        color: #3d52d5;
        font-weight: 600;
        margin-bottom: 10px;
      }

      .skill-list {
        list-style: none;
      }

      .skill-list li {
        color: #666;
        margin-bottom: 5px;
        font-size: 0.95rem;
      }

      .skill-list li::before {
        content: "•";
        color: #3d52d5;
        margin-right: 8px;
      }

      .loading {
        display: none;
        text-align: center;
        padding: 40px;
      }

      .spinner {
        border: 4px solid #f3f3f3;
        border-top: 4px solid #3d52d5;
        border-radius: 50%;
        width: 40px;
        height: 40px;
        animation: spin 1s linear infinite;
        margin: 0 auto 20px;
      }

      @keyframes spin {
        0% {
          transform: rotate(0deg);
        }

        100% {
          transform: rotate(360deg);
        }
      }

      .no-data {
        text-align: center;
        color: #666;
        font-style: italic;
        padding: 40px;
      }

      .back-btn {
        background: transparent;
        border: 2px solid #3d52d5;
        color: #3d52d5;
        padding: 10px 20px;
        border-radius: 20px;
        font-weight: 600;
        cursor: pointer;
        transition: all 0.3s ease;
        margin-right: 15px;
      }

      .back-btn:hover {
        background: #3d52d5;
        color: white;
      }

      @media (max-width: 768px) {
        .content-grid {
          grid-template-columns: 1fr;
        }

        .search-container {
          flex-direction: column;
        }

        .search-input,
        .search-btn {
          width: 100%;
        }

        .roadmap-steps {
          flex-direction: column;
        }

        .roadmap-step::after {
          display: none;
        }
      }
    </style>
  </head>

  <body>
    <div class="container">
      <div class="header">
        <div class="logo-section">
          <div class="logo">
            <!-- <img src="./assets/logo final.png" alt="Logo" /> -->

            <img
              src="{{ url_for('static', filename='./assets/logo final.png') }}"
              alt=""
            />
          </div>
          <span class="logo-text">
            <span class="nex">Nex</span><span class="ed">Ed</span>
          </span>
        </div>
        <a href="/profile">
          <div class="user-info">
            <div class="user-avatar" id="userAvatar">M</div>
            <span id="userName">User</span>
          </div>
        </a>
      </div>

      <div class="main-content">
        <button class="back-btn" onclick="goBack()">← Back</button>
        <h1 class="page-title">Career Path Generator</h1>

        <div class="search-section">
          <div class="search-container">
            <input
              type="text"
              class="search-input"
              id="careerSearch"
              placeholder="Enter Career (e.g., Data Scientist, Web Developer, Teacher)"
            />
            <button class="search-btn" onclick="searchCareer()">Search</button>
          </div>
        </div>

        <div class="loading" id="loadingIndicator">
          <div class="spinner"></div>
          <p>Generating your personalized career path...</p>
        </div>

        <div class="content-grid" id="mainContent">
          <div class="career-details">
            <div class="career-header">
              <h2 class="career-title" id="careerTitle">Data Engineer</h2>
              <p class="career-description" id="careerDescription">
                A Data Engineer designs, builds, and maintains the systems that
                collect, store, and process large amounts of data.
              </p>
            </div>

            <div class="roadmap-section">
              <h3 class="section-title">Roadmap</h3>
              <div class="roadmap-container">
                <div class="roadmap-title" id="roadmapTitle">
                  Data Engineer Roadmap (Learning Path)
                </div>
                <div class="roadmap-steps" id="roadmapSteps">
                  <div class="roadmap-step">Learn Python + SQL</div>
                  <div class="roadmap-step">
                    Databases (PostgreSQL & MongoDB)
                  </div>
                  <div class="roadmap-step">
                    ETL & Pipelines (Airflow & Prefect)
                  </div>
                  <div class="roadmap-step">Big Data (Spark + Kafka)</div>
                  <div class="roadmap-step">AWS / GCP / Azure</div>
                  <div class="roadmap-step">
                    Data Warehousing (Redshift / BigQuery / Snowflake)
                  </div>
                  <div class="roadmap-step">Projects and & Streaming</div>
                </div>
              </div>
            </div>

            <div class="skills-section">
              <h3 class="section-title">Required Skills</h3>
              <div class="skills-grid" id="skillsGrid">
                <div class="skill-category">
                  <h4>Programming</h4>
                  <ul class="skill-list">
                    <li>Python</li>
                    <li>SQL</li>
                    <li>Java/Scala</li>
                    <li>Shell Scripting</li>
                  </ul>
                </div>
                <div class="skill-category">
                  <h4>Databases</h4>
                  <ul class="skill-list">
                    <li>PostgreSQL</li>
                    <li>MongoDB</li>
                    <li>Redis</li>
                    <li>Elasticsearch</li>
                  </ul>
                </div>
                <div class="skill-category">
                  <h4>Big Data Tools</h4>
                  <ul class="skill-list">
                    <li>Apache Spark</li>
                    <li>Apache Kafka</li>
                    <li>Hadoop</li>
                    <li>Apache Airflow</li>
                  </ul>
                </div>
              </div>
            </div>
          </div>

          <div class="courses-sidebar">
            <h3 class="sidebar-title">Suggested Courses</h3>
            <div id="coursesList">
              <a
                href="https://www.swayam.gov.in/nd1_noc20_cs73"
                target="_blank"
                class="course-card"
              >
                Swayam
              </a>
              <a
                href="https://nptel.ac.in/courses/106/106/106106094/"
                target="_blank"
                class="course-card"
              >
                NPTEL
              </a>
              <a
                href="https://www.udemy.com/course/the-complete-sql-bootcamp/"
                target="_blank"
                class="course-card"
              >
                Udemy
              </a>
            </div>
          </div>
        </div>
      </div>
    </div>

    <script>
      // Career database with detailed information
      const careerDatabase = {
        "data engineer": {
          title: "Data Engineer",
          description:
            "A Data Engineer designs, builds, and maintains the systems that collect, store, and process large amounts of data. They work with big data technologies and ensure data pipelines are reliable and scalable.",
          roadmap: [
            "Learn Python + SQL",
            "Databases (PostgreSQL & MongoDB)",
            "ETL & Pipelines (Airflow & Prefect)",
            "Big Data (Spark + Kafka)",
            "AWS / GCP / Azure",
            "Data Warehousing (Redshift / BigQuery)",
            "Projects and Streaming",
          ],
          skills: {
            Programming: ["Python", "SQL", "Java/Scala", "Shell Scripting"],
            Databases: ["PostgreSQL", "MongoDB", "Redis", "Elasticsearch"],
            "Big Data Tools": [
              "Apache Spark",
              "Apache Kafka",
              "Hadoop",
              "Apache Airflow",
            ],
            "Cloud Platforms": ["AWS", "Google Cloud", "Azure", "Docker"],
          },
          courses: [
            {
              name: "Swayam - Data Engineering",
              url: "https://www.swayam.gov.in/nd1_noc20_cs73",
            },
            {
              name: "NPTEL - Database Management",
              url: "https://nptel.ac.in/courses/106/106/106106094/",
            },
            {
              name: "Udemy - Complete SQL Bootcamp",
              url: "https://www.udemy.com/course/the-complete-sql-bootcamp/",
            },
          ],
        },
        "software engineer": {
          title: "Software Engineer",
          description:
            "A Software Engineer designs, develops, and maintains software applications and systems. They work with various programming languages and frameworks to create scalable and efficient solutions.",
          roadmap: [
            "Learn Programming Fundamentals",
            "Master Data Structures & Algorithms",
            "Web Development (Frontend/Backend)",
            "Database Management",
            "Version Control (Git)",
            "Software Testing",
            "Deploy & DevOps Basics",
          ],
          skills: {
            Programming: ["JavaScript", "Python", "Java", "C++"],
            "Web Technologies": ["HTML/CSS", "React", "Node.js", "REST APIs"],
            Databases: ["MySQL", "PostgreSQL", "MongoDB"],
            Tools: ["Git", "Docker", "VS Code", "Linux"],
          },
          courses: [
            {
              name: "Swayam - Programming in Java",
              url: "https://www.swayam.gov.in",
            },
            { name: "NPTEL - Data Structures", url: "https://nptel.ac.in" },
            {
              name: "Udemy - Full Stack Development",
              url: "https://www.udemy.com",
            },
          ],
        },
        "data scientist": {
          title: "Data Scientist",
          description:
            "A Data Scientist analyzes complex data to help organizations make informed decisions. They use statistical methods, machine learning, and programming to extract insights from large datasets.",
          roadmap: [
            "Statistics & Mathematics",
            "Python/R Programming",
            "Data Manipulation (Pandas/NumPy)",
            "Data Visualization (Matplotlib/Seaborn)",
            "Machine Learning (Scikit-learn)",
            "Deep Learning (TensorFlow/PyTorch)",
            "MLOps & Deployment",
          ],
          skills: {
            Programming: ["Python", "R", "SQL", "Jupyter"],
            Statistics: [
              "Descriptive Statistics",
              "Inferential Statistics",
              "Hypothesis Testing",
            ],
            "Machine Learning": [
              "Scikit-learn",
              "TensorFlow",
              "PyTorch",
              "Keras",
            ],
            Visualization: ["Matplotlib", "Seaborn", "Plotly", "Tableau"],
          },
          courses: [
            {
              name: "Swayam - Machine Learning",
              url: "https://www.swayam.gov.in",
            },
            {
              name: "NPTEL - Statistics for Data Science",
              url: "https://nptel.ac.in",
            },
            {
              name: "Udemy - Python for Data Science",
              url: "https://www.udemy.com",
            },
          ],
        },
        "ux/ui designer": {
          title: "UX/UI Designer",
          description:
            "A UX/UI Designer creates user-friendly and visually appealing digital interfaces. They focus on user experience and visual design to make products intuitive and engaging.",
          roadmap: [
            "Design Principles & Color Theory",
            "User Research & Personas",
            "Wireframing & Prototyping",
            "Design Tools (Figma/Adobe XD)",
            "User Testing & Analytics",
            "Responsive Design",
            "Portfolio Development",
          ],
          skills: {
            "Design Tools": ["Figma", "Adobe XD", "Sketch", "Photoshop"],
            "UX Research": [
              "User Interviews",
              "Usability Testing",
              "Analytics",
              "A/B Testing",
            ],
            "Design Principles": [
              "Typography",
              "Color Theory",
              "Layout",
              "Visual Hierarchy",
            ],
            Technical: ["HTML/CSS", "Responsive Design", "Design Systems"],
          },
          courses: [
            { name: "Swayam - UI/UX Design", url: "https://www.swayam.gov.in" },
            {
              name: "NPTEL - Human Computer Interaction",
              url: "https://nptel.ac.in",
            },
            {
              name: "Udemy - Complete UX/UI Bootcamp",
              url: "https://www.udemy.com",
            },
          ],
        },

        // FIXED: Changed from "machineLearning" to "machine learning"
        "machine learning": {
          title: "Machine Learning Engineer",
          description:
            "A Machine Learning Engineer designs, develops, and deploys machine learning models and systems. They work with large datasets, algorithms, and frameworks to build intelligent applications.",
          roadmap: [
            "Learn Python Programming",
            "Mathematics for ML (Linear Algebra, Probability, Statistics)",
            "Data Preprocessing & Visualization",
            "Supervised & Unsupervised Learning",
            "Deep Learning & Neural Networks",
            "Model Deployment & MLOps",
            "Continuous Learning & Research",
          ],
          skills: {
            Programming: ["Python", "R", "SQL"],
            Mathematics: ["Linear Algebra", "Statistics", "Probability"],
            MachineLearning: [
              "Regression & Classification",
              "Clustering",
              "Neural Networks",
              "Model Optimization",
            ],
            Tools: [
              "TensorFlow",
              "PyTorch",
              "Scikit-learn",
              "Jupyter Notebooks",
            ],
            Deployment: [
              "Flask/Django",
              "FastAPI",
              "Docker",
              "Cloud Platforms (AWS, GCP, Azure)",
            ],
          },
          courses: [
            {
              name: "Coursera - Machine Learning by Andrew Ng",
              url: "https://www.coursera.org/learn/machine-learning",
            },
            {
              name: "Udemy - Python for Data Science and Machine Learning Bootcamp",
              url: "https://www.udemy.com",
            },
            {
              name: "fast.ai - Practical Deep Learning for Coders",
              url: "https://course.fast.ai",
            },
          ],
        },

        // FIXED: Changed from "webDeveloper" to "web developer"
        "web developer": {
          title: "Web Developer",
          description:
            "A Web Developer builds and maintains websites and web applications. They use frontend and backend technologies to create responsive, user-friendly, and efficient digital experiences.",
          roadmap: [
            "Learn HTML, CSS, and JavaScript",
            "Frontend Frameworks (React, Angular, Vue)",
            "Backend Development (Node.js, Python, PHP)",
            "Databases (SQL, NoSQL)",
            "Version Control (Git/GitHub)",
            "Responsive Design & UI/UX",
            "Deployment & DevOps Basics",
          ],
          skills: {
            Frontend: ["HTML", "CSS", "JavaScript", "React/Vue/Angular"],
            Backend: ["Node.js", "Express.js", "Django/Flask", "PHP"],
            Databases: ["MySQL", "PostgreSQL", "MongoDB"],
            Tools: ["Git/GitHub", "Webpack", "VS Code"],
            Deployment: ["Docker", "Netlify", "Vercel", "AWS/GCP"],
          },
          courses: [
            {
              name: "FreeCodeCamp - Responsive Web Design",
              url: "https://www.freecodecamp.org",
            },
            {
              name: "Udemy - The Web Developer Bootcamp by Colt Steele",
              url: "https://www.udemy.com",
            },
            {
              name: "MDN Web Docs",
              url: "https://developer.mozilla.org",
            },
          ],
        },

        teacher: {
          title: "Teacher/Educator",
          description:
            "A Teacher educates and inspires students in academic subjects. They develop lesson plans, assess student progress, and create engaging learning environments.",
          roadmap: [
            "Educational Psychology",
            "Subject Matter Expertise",
            "Curriculum Development",
            "Classroom Management",
            "Assessment & Evaluation",
            "Educational Technology",
            "Continuous Professional Development",
          ],
          skills: {
            Pedagogy: [
              "Lesson Planning",
              "Classroom Management",
              "Assessment",
              "Differentiated Instruction",
            ],
            Communication: [
              "Public Speaking",
              "Written Communication",
              "Active Listening",
            ],
            Technology: [
              "Educational Software",
              "Online Learning Platforms",
              "Digital Tools",
            ],
            "Subject Knowledge": [
              "Content Expertise",
              "Research Skills",
              "Critical Thinking",
            ],
          },
          courses: [
            {
              name: "Swayam - Teaching Aptitude",
              url: "https://www.swayam.gov.in",
            },
            {
              name: "NPTEL - Educational Psychology",
              url: "https://nptel.ac.in",
            },
            {
              name: "Udemy - Online Teaching Mastery",
              url: "https://www.udemy.com",
            },
          ],
        },

        "clinical psychologist": {
          title: "Clinical Psychologist",
          description:
            "A Clinical Psychologist helps individuals overcome mental health challenges through assessment, diagnosis, and therapeutic interventions.",
          roadmap: [
            "Psychology Fundamentals",
            "Research Methods & Statistics",
            "Abnormal Psychology",
            "Therapeutic Techniques",
            "Clinical Assessment",
            "Internship & Supervised Practice",
            "Licensing & Certification",
          ],
          skills: {
            "Clinical Skills": [
              "Assessment",
              "Diagnosis",
              "Therapy",
              "Crisis Intervention",
            ],
            Research: [
              "Statistical Analysis",
              "Research Design",
              "Data Collection",
            ],
            Communication: ["Active Listening", "Empathy", "Report Writing"],
            Ethics: [
              "Confidentiality",
              "Professional Boundaries",
              "Cultural Sensitivity",
            ],
          },
          courses: [
            { name: "Swayam - Psychology", url: "https://www.swayam.gov.in" },
            {
              name: "NPTEL - Cognitive Psychology",
              url: "https://nptel.ac.in",
            },
            {
              name: "Udemy - Psychology Fundamentals",
              url: "https://www.udemy.com",
            },
          ],
        },
      };

      // Quiz result to career mapping
      const quizResultMapping = {
        "technical-analytical": [
          "data engineer",
          "software engineer",
          "data scientist",
        ],
        "creative-artistic": [
          "web developer",
          "ui/ux designer",
          "graphic designer",
        ],
        "social-helpful": ["teacher", "counselor", "social worker"],
        "business-leadership": [
          "product manager",
          "business analyst",
          "marketing manager",
        ],
      };

      let currentCareer = "data engineer";

      // Load user data
      function loadUserData() {
        const loggedInUser = JSON.parse(localStorage.getItem("loggedInUser"));
        if (loggedInUser) {
          const users = JSON.parse(localStorage.getItem("users")) || [];
          const user = users.find((u) => u.email === loggedInUser.email);
          if (user && user.name) {
            document.getElementById("userName").textContent = user.name;
            document.getElementById("userAvatar").textContent = user.name
              .charAt(0)
              .toUpperCase();

            // Load personalized career recommendation
            loadPersonalizedCareer(user);
          }
        }
        // Show quiz prompt if no quiz results found
        const quizResults = sessionStorage.getItem("quizResults");
        if (!quizResults) {
          showQuizPrompt();
        }
      }

      // Load personalized career based on user profile and quiz results
      function loadPersonalizedCareer(user) {
        let recommendedCareer = "data engineer"; // default

        // Check for quiz results first (highest priority)
        const quizResults = sessionStorage.getItem("quizResults");
        if (quizResults) {
          const results = JSON.parse(quizResults);
          console.log("Quiz results found:", results);

          if (
            results.recommendedCareers &&
            results.recommendedCareers.length > 0
          ) {
            // Map quiz career names to our database keys
            const careerMapping = {
              "Software Engineer": "software engineer",
              "Data Scientist": "data scientist",
              "UX/UI Designer": "ux/ui designer",
              "Teacher/Professor": "teacher",
              "Clinical Psychologist": "clinical psychologist",
              ml: "machine learning",
              "ml engineer": "machine learning",
              "machine learning engineer": "machine learning",
              "web dev": "web developer",
              "frontend developer": "web developer",
              "backend developer": "web developer",
              "full stack developer": "web developer",
            };

            const quizCareer = results.recommendedCareers[0].name;
            recommendedCareer =
              careerMapping[quizCareer] || "software engineer";

            // Display personalized message
            showPersonalizedMessage(results.profileType, quizCareer);
          }
        } else if (user.interests) {
          // Fallback to interests from onboarding
          if (
            user.interests.includes("Tech") ||
            user.interests.includes("Coding")
          ) {
            recommendedCareer = "software engineer";
          } else if (user.interests.includes("Teaching")) {
            recommendedCareer = "teacher";
          } else if (
            user.interests.includes("Design") ||
            user.interests.includes("Creative")
          ) {
            recommendedCareer = "ux/ui designer";
          }
        }

        // Update the page with personalized career
        updateCareerDisplay(recommendedCareer);
      }

      function showPersonalizedMessage(profileType, careerName) {
        const messageContainer = document.createElement("div");
        messageContainer.style.cssText = `
        background: linear-gradient(135deg, #3D52D5 0%, #6b7ce6 100%);
        color: white;
        padding: 20px;
        border-radius: 15px;
        margin-bottom: 20px;
        text-align: center;
        box-shadow: 0 4px 15px rgba(74, 108, 247, 0.3);
    `;

        messageContainer.innerHTML = `
        <h3 style="margin-bottom: 10px; font-size: 1.3rem;">Personalized Recommendation</h3>
        <p style="font-size: 1.1rem; opacity: 0.95;">
            Based on your <strong>${profileType}</strong> profile from the quiz, 
            we recommend exploring <strong>${careerName}</strong>. 
            This path aligns perfectly with your strengths and interests!
        </p>
    `;

        // Insert before the career details
        const careerDetails = document.querySelector(".career-details");
        careerDetails.parentNode.insertBefore(messageContainer, careerDetails);
      }

      // Update career display
      function updateCareerDisplay(careerKey) {
        const career = careerDatabase[careerKey.toLowerCase()];
        if (!career) return;

        currentCareer = careerKey.toLowerCase();

        // Update career details
        document.getElementById("careerTitle").textContent = career.title;
        document.getElementById("careerDescription").textContent =
          career.description;
        document.getElementById(
          "roadmapTitle"
        ).textContent = `${career.title} Roadmap (Learning Path)`;

        // Update roadmap steps
        const stepsContainer = document.getElementById("roadmapSteps");
        stepsContainer.innerHTML = career.roadmap
          .map((step) => `<div class="roadmap-step">${step}</div>`)
          .join("");

        // Update skills
        const skillsGrid = document.getElementById("skillsGrid");
        skillsGrid.innerHTML = Object.entries(career.skills)
          .map(
            ([category, skills]) => `
                <div class="skill-category">
                    <h4>${category}</h4>
                    <ul class="skill-list">
                        ${skills.map((skill) => `<li>${skill}</li>`).join("")}
                    </ul>
                </div>
            `
          )
          .join("");

        // Update courses
        const coursesList = document.getElementById("coursesList");
        coursesList.innerHTML = career.courses
          .map(
            (course) =>
              `<a href="${course.url}" target="_blank" class="course-card">${course.name}</a>`
          )
          .join("");
      }

      // Search for career
      function searchCareer() {
        const searchTerm = document
          .getElementById("careerSearch")
          .value.toLowerCase()
          .trim();
        if (!searchTerm) return;

        // Show loading
        document.getElementById("loadingIndicator").style.display = "block";
        document.getElementById("mainContent").style.display = "none";

        // Simulate API delay
        setTimeout(() => {
          const career = careerDatabase[searchTerm];

          if (career) {
            updateCareerDisplay(searchTerm);
          } else {
            // If exact match not found, try partial matching
            const matchedKey = Object.keys(careerDatabase).find(
              (key) =>
                key.includes(searchTerm) ||
                searchTerm.includes(key.split(" ")[0])
            );

            if (matchedKey) {
              updateCareerDisplay(matchedKey);
            } else {
              // Show default or suggest alternatives
              alert(
                "Career not found in our database. Showing Data Engineer as default."
              );
              updateCareerDisplay("data engineer");
            }
          }

          // Hide loading
          document.getElementById("loadingIndicator").style.display = "none";
          document.getElementById("mainContent").style.display = "grid";
        }, 1500);
      }

      // Add enter key support for search
      document.addEventListener("DOMContentLoaded", function () {
        document
          .getElementById("careerSearch")
          .addEventListener("keypress", function (e) {
            if (e.key === "Enter") {
              searchCareer();
            }
          });

        // Load user data and personalized career
        loadUserData();
      });

      // Store quiz results when user completes quiz (to be called from quiz page)
      function storeQuizResults(results) {
        sessionStorage.setItem("quizResults", JSON.stringify(results));
      }

      function showQuizPrompt() {
        const promptContainer = document.createElement("div");
        promptContainer.className = "quiz-prompt";
        promptContainer.innerHTML = `
        <p><strong>Want personalized career recommendations?</strong></p>
        <p>Take our <a href="quiz.html">Psychometric Quiz</a> to get career paths tailored specifically to your personality and interests!</p>
    `;

        const searchSection = document.querySelector(".search-section");
        searchSection.parentNode.insertBefore(
          promptContainer,
          searchSection.nextSibling
        );
      }

      function goBack() {
        if (document.referrer && document.referrer !== window.location.href) {
          window.history.back();
        } else {
          window.location.href = "/";
        }
      }
    </script>
  </body>
</html>
