<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>NexEd - Upcoming Exams</title>
    <style>
      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }

      body {
        font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto,
          sans-serif;
        min-height: 100vh;
        padding: 20px;
      }

      .container {
        max-width: 1200px;
        margin: 0 auto;
      }

      .header {
        display: flex;
        align-items: center;
        justify-content: space-between;
        margin-bottom: 30px;
        padding: 10px 20px;
        background: white;
        border-radius: 15px 15px 0 0;
        box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
      }

      .logo-section {
        display: flex;
        align-items: center;
        gap: 12px;
      }

      .logo {
        width: 40px;
        height: 40px;
        border-radius: 8px;
        display: flex;
        align-items: center;
        justify-content: center;
        color: white;
        font-weight: bold;
        font-size: 1.2rem;
      }

      .logo img {
        width: 40px;
      }

      .logo-text {
        font-size: 32px;
        /* adjust size */
        font-weight: bold;
        /* bold for logo look */
        font-family: Arial, sans-serif;
      }

      .logo-text .nex {
        color: #197dbb;
        /* blue for Nex */
      }

      .logo-text .ed {
        color: #000000;
        /* black for Ed */
      }

      .user-info {
        display: flex;
        align-items: center;
        gap: 10px;
        color: #197dbb;
        font-weight: 600;
        text-decoration: none;
      }

      .user-avatar {
        width: 40px;
        height: 40px;
        border-radius: 50%;
        background-color: #197dbb;
        backdrop-filter: blur(10px);
        border: 2px solid rgba(255, 255, 255, 0.3);
        display: flex;
        align-items: center;
        justify-content: center;
        color: white;
        font-size: 1rem;
        font-weight: bold;
      }

      .main-content {
        background-color: #b4c5e48a;
        backdrop-filter: blur(20px);
        border-radius: 25px;
        padding: 40px;
        box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
      }

      .page-title {
        color: #4a6cf7;
        font-size: 2.5rem;
        font-weight: 700;
        margin-bottom: 30px;
        text-align: center;
      }

      .recommendations-banner {
        background: linear-gradient(135deg, #4a6cf7 0%, #6b7ce6 100%);
        color: white;
        padding: 20px 30px;
        border-radius: 15px;
        margin-bottom: 30px;
        display: none;
      }

      .recommendations-banner.show {
        display: block;
      }

      .recommendations-banner h3 {
        font-size: 1.3rem;
        margin-bottom: 10px;
      }

      .recommendations-banner p {
        opacity: 0.9;
        line-height: 1.4;
      }

      .search-section {
        background: #f8f9fa;
        padding: 25px;
        border-radius: 15px;
        margin-bottom: 30px;
      }

      .search-container {
        position: relative;
        max-width: 600px;
        margin: 0 auto;
      }

      .search-input {
        width: 100%;
        padding: 15px 25px 15px 50px;
        border: 2px solid #e1e5e9;
        border-radius: 25px;
        font-size: 1.1rem;
        background: white;
        transition: all 0.3s ease;
      }

      .search-input:focus {
        outline: none;
        border-color: #4a6cf7;
        box-shadow: 0 0 0 3px rgba(74, 108, 247, 0.1);
      }

      .search-icon {
        position: absolute;
        left: 18px;
        top: 50%;
        transform: translateY(-50%);
        color: #999;
        font-size: 1.2rem;
      }

      .search-btn {
        position: absolute;
        right: 5px;
        top: 8px;
        background: #f4b942;
        color: white;
        border: none;
        padding: 10px 25px;
        border-radius: 20px;
        font-weight: 600;
        cursor: pointer;
        transition: all 0.3s ease;
      }

      .search-btn:hover {
        background: #e6a832;
        transform: translateY(-1px);
      }

      .filters {
        display: flex;
        gap: 15px;
        margin-top: 20px;
        justify-content: center;
        flex-wrap: wrap;
      }

      .filter-btn {
        padding: 8px 16px;
        border: 2px solid #e1e5e9;
        background: white;
        border-radius: 20px;
        cursor: pointer;
        transition: all 0.3s ease;
        font-weight: 500;
      }

      .filter-btn:hover,
      .filter-btn.active {
        background: #4a6cf7;
        color: white;
        border-color: #4a6cf7;
      }

      .exams-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
        gap: 25px;
        margin-bottom: 30px;
      }

      .exam-card {
        background: white;
        border-radius: 18px;
        padding: 25px;
        box-shadow: 0 8px 25px rgba(0, 0, 0, 0.08);
        transition: all 0.3s ease;
        border: 2px solid transparent;
        position: relative;
        overflow: hidden;
      }

      .exam-card:hover {
        transform: translateY(-5px);
        box-shadow: 0 15px 40px rgba(0, 0, 0, 0.12);
      }

      .exam-card.recommended {
        border-color: #4a6cf7;
        background: linear-gradient(135deg, #4a6cf7 0%, #6b7ce6 100%);
        color: white;
      }

      .exam-card.recommended::before {
        content: "Recommended for You";
        position: absolute;
        top: 0;
        right: 0;
        background: #f4b942;
        color: white;
        padding: 5px 15px;
        font-size: 0.8rem;
        font-weight: 600;
        border-radius: 0 18px 0 10px;
      }

      .exam-header {
        display: flex;
        justify-content: space-between;
        align-items: flex-start;
        margin-bottom: 15px;
      }

      .exam-name {
        font-size: 1.5rem;
        font-weight: 700;
        margin-bottom: 5px;
      }

      .exam-date {
        background: #f4b942;
        color: white;
        padding: 6px 12px;
        border-radius: 15px;
        font-size: 0.9rem;
        font-weight: 600;
        white-space: nowrap;
      }

      .exam-card.recommended .exam-date {
        background: rgba(255, 255, 255, 0.2);
        backdrop-filter: blur(10px);
      }

      .exam-organization {
        color: #666;
        font-weight: 600;
        margin-bottom: 15px;
        padding: 8px 15px;
        background: #f8f9fa;
        border-radius: 10px;
        display: inline-block;
      }

      .exam-card.recommended .exam-organization {
        background: rgba(255, 255, 255, 0.15);
        color: rgba(255, 255, 255, 0.9);
      }

      .exam-description {
        color: #555;
        line-height: 1.5;
        margin-bottom: 20px;
      }

      .exam-card.recommended .exam-description {
        color: rgba(255, 255, 255, 0.9);
      }

      .exam-details {
        display: flex;
        gap: 15px;
        flex-wrap: wrap;
        margin-bottom: 20px;
      }

      .detail-item {
        display: flex;
        align-items: center;
        gap: 8px;
        color: #666;
        font-size: 0.9rem;
      }

      .exam-card.recommended .detail-item {
        color: rgba(255, 255, 255, 0.8);
      }

      .exam-actions {
        display: flex;
        gap: 10px;
      }

      .action-btn {
        flex: 1;
        padding: 12px;
        border: none;
        border-radius: 10px;
        font-weight: 600;
        cursor: pointer;
        transition: all 0.3s ease;
        text-decoration: none;
        text-align: center;
        display: inline-block;
      }

      .back-btn {
        background: transparent;
        border: 2px solid #3d52d5;
        color: #3d52d5;
        padding: 10px 20px;
        border-radius: 20px;
        font-weight: 600;
        cursor: pointer;
        transition: all 0.3s ease;
        margin-right: 15px;
      }

      .back-btn:hover {
        background: #3d52d5;
        color: white;
      }

      .btn-primary {
        background: #4a6cf7;
        color: white;
      }

      .btn-primary:hover {
        background: #3a5ce6;
        transform: translateY(-1px);
      }

      .exam-card.recommended .btn-primary {
        background: rgba(255, 255, 255, 0.2);
        backdrop-filter: blur(10px);
        border: 1px solid rgba(255, 255, 255, 0.3);
      }

      .btn-secondary {
        background: #f8f9fa;
        color: #4a6cf7;
        border: 1px solid #e1e5e9;
      }

      .btn-secondary:hover {
        background: #e9ecef;
      }

      .exam-card.recommended .btn-secondary {
        background: transparent;
        color: white;
        border-color: rgba(255, 255, 255, 0.3);
      }

      .no-results {
        text-align: center;
        padding: 60px 20px;
        color: #666;
      }

      .no-results-icon {
        font-size: 4rem;
        margin-bottom: 20px;
        opacity: 0.5;
      }

      .no-results h3 {
        font-size: 1.5rem;
        margin-bottom: 10px;
      }

      @media (max-width: 768px) {
        .main-content {
          padding: 25px;
        }

        .page-title {
          font-size: 2rem;
        }

        .exams-grid {
          grid-template-columns: 1fr;
        }

        .exam-header {
          flex-direction: column;
          gap: 10px;
        }

        .exam-actions {
          flex-direction: column;
        }

        .filters {
          justify-content: flex-start;
        }
      }

      .match-score {
        background: #4caf50;
        color: white;
        padding: 4px 10px;
        border-radius: 12px;
        font-size: 0.8rem;
        font-weight: 600;
        margin-left: 10px;
      }
    </style>
  </head>
  <body>
    <div class="container">
      <div class="header">
        <div class="logo-section">
          <div class="logo">
            <img
              src="{{ url_for('static', filename='./assets/logo final.png') }}"
              alt=""
            />
          </div>
          <span class="logo-text">
            <span class="nex">Nex</span><span class="ed">Ed</span>
          </span>
        </div>
        <a href="/profile" class="user-info">
          <div class="user-avatar" id="userAvatar">U</div>
          <span id="userName">User</span>
        </a>
      </div>

      <div class="main-content">
        <button class="back-btn" onclick="goBack()">← Back</button>
        <h1 class="page-title">Upcoming Exams</h1>

        <div class="recommendations-banner" id="recommendationsBanner">
          <h3>🎯 Personalized Recommendations</h3>
          <p id="recommendationsText">
            Based on your quiz results, we've highlighted exams that match your
            career interests and profile.
          </p>
        </div>

        <div class="search-section">
          <div class="search-container">
            <div class="searchIcon">
              <svg
                class="search-icon"
                width="24"
                height="24"
                viewBox="0 0 24 24"
                fill="none"
                stroke="currentColor"
                stroke-width="2"
              >
                <circle cx="11" cy="11" r="8"></circle>
                <path d="m21 21-4.35-4.35"></path>
              </svg>
            </div>
            <input
              type="text"
              class="search-input"
              id="searchInput"
              placeholder="Enter Exam Name (e.g., JEE, NEET, CAT)"
            />
            <button class="search-btn" onclick="searchExams()">Search</button>
          </div>
          <div class="filters">
            <div class="filter-btn active" data-filter="all">All Exams</div>
            <div class="filter-btn" data-filter="recommended">Recommended</div>
            <div class="filter-btn" data-filter="engineering">Engineering</div>
            <div class="filter-btn" data-filter="medical">Medical</div>
            <div class="filter-btn" data-filter="management">Management</div>
            <div class="filter-btn" data-filter="government">Government</div>
            <div class="filter-btn" data-filter="design">Design</div>
          </div>
        </div>

        <div class="exams-grid" id="examsGrid">
          <!-- Exams will be populated by JavaScript -->
        </div>

        <div class="no-results" id="noResults" style="display: none">
          <div class="no-results-icon">📚</div>
          <h3>No exams found</h3>
          <p>Try adjusting your search or filter criteria</p>
        </div>
      </div>
    </div>

    <script>
      // Comprehensive exam database with categories for different career paths
      const examDatabase = [
        {
          name: "JEE Main 2025",
          organization: "NTA",
          date: "Apr 2025",
          description:
            "Joint Entrance Examination for engineering admissions to NITs, IIITs, and other technical institutes.",
          category: "engineering",
          applicationDeadline: "Mar 2025",
          eligibilityAge: "17-25",
          recommendedFor: ["technical-analytical", "practical-technical"],
        },
        {
          name: "NEET UG 2025",
          organization: "NTA",
          date: "May 2025",
          description:
            "National Eligibility cum Entrance Test for undergraduate medical courses.",
          category: "medical",
          applicationDeadline: "Apr 2025",
          eligibilityAge: "17-25",
          recommendedFor: ["social-helpful", "analytical"],
        },
        {
          name: "CAT 2025",
          organization: "IIM",
          date: "Nov 2025",
          description:
            "Common Admission Test for MBA admissions to IIMs and other top B-schools.",
          category: "management",
          applicationDeadline: "Sep 2025",
          eligibilityAge: "No limit",
          recommendedFor: ["business-leadership", "analytical"],
        },
        {
          name: "GATE 2025",
          organization: "IIT",
          date: "Feb 2025",
          description:
            "Graduate Aptitude Test in Engineering for M.Tech admissions and PSU jobs.",
          category: "engineering",

          applicationDeadline: "Oct 2024",
          eligibilityAge: "No limit",
          recommendedFor: ["technical-analytical"],
        },
        {
          name: "CLAT 2025",
          organization: "CLAT Consortium",
          date: "Dec 2024",
          description:
            "Common Law Admission Test for undergraduate and postgraduate law programs.",
          category: "law",

          applicationDeadline: "Nov 2024",
          eligibilityAge: "17-20",
          recommendedFor: ["business-leadership", "analytical"],
        },
        {
          name: "NIFT 2025",
          organization: "NIFT",
          date: "Jan 2025",
          description:
            "National Institute of Fashion Technology entrance exam for design courses.",
          category: "design",

          applicationDeadline: "Dec 2024",
          eligibilityAge: "17-23",
          recommendedFor: ["creative-artistic"],
        },
        {
          name: "NID 2025",
          organization: "NID",
          date: "Jan 2025",
          description:
            "National Institute of Design entrance exam for various design disciplines.",
          category: "design",

          applicationDeadline: "Nov 2024",
          eligibilityAge: "17-25",
          recommendedFor: ["creative-artistic"],
        },
        {
          name: "SSC CGL 2025",
          organization: "SSC",
          date: "Jul 2025",
          description:
            "Staff Selection Commission Combined Graduate Level for government jobs.",
          category: "government",

          applicationDeadline: "May 2025",
          eligibilityAge: "18-32",
          recommendedFor: ["business-leadership", "social-helpful"],
        },
        {
          name: "UPSC CSE 2025",
          organization: "UPSC",
          date: "Jun 2025",
          description:
            "Union Public Service Commission Civil Services Examination for IAS, IPS, IFS.",

          applicationDeadline: "Mar 2025",
          eligibilityAge: "21-32",
          recommendedFor: ["social-helpful", "business-leadership"],
        },
        {
          name: "XAT 2025",
          organization: "XLRI",
          date: "Jan 2025",
          description:
            "Xavier Aptitude Test for MBA admissions to XLRI and associated institutes.",
          category: "management",
          applicationDeadline: "Nov 2024",
          eligibilityAge: "No limit",
          recommendedFor: ["business-leadership"],
        },
        {
          name: "CEED 2025",
          organization: "IIT Bombay",
          date: "Jan 2025",
          description:
            "Common Entrance Examination for Design for M.Des admissions.",
          category: "design",

          applicationDeadline: "Oct 2024",
          eligibilityAge: "No limit",
          recommendedFor: ["creative-artistic"],
        },
        {
          name: "AIIMS 2025",
          organization: "AIIMS",
          date: "May 2025",
          description:
            "All India Institute of Medical Sciences entrance exam for MBBS.",

          applicationDeadline: "Mar 2025",
          eligibilityAge: "17-25",
          recommendedFor: ["social-helpful", "analytical"],
        },
        {
          name: "BITSAT 2025",
          organization: "BITS",
          date: "May 2025",
          description:
            "Birla Institute of Technology and Science Admission Test.",
          category: "engineering",

          applicationDeadline: "Mar 2025",
          eligibilityAge: "16-25",
          recommendedFor: ["technical-analytical"],
        },
        {
          name: "SNAP 2024",
          organization: "SIU",
          date: "Dec 2024",
          description:
            "Symbiosis National Aptitude Test for MBA programs at Symbiosis.",
          category: "management",

          applicationDeadline: "Nov 2024",
          eligibilityAge: "No limit",
          recommendedFor: ["business-leadership"],
        },
        {
          name: "UGC NET 2025",
          organization: "NTA",
          date: "Multiple dates",
          description:
            "National Eligibility Test for Assistant Professor and JRF.",
          category: "academic",
          applicationDeadline: "Ongoing",
          eligibilityAge: "No limit",
          recommendedFor: ["social-helpful", "intellectual"],
        },
        {
          name: "TNPSC Group 1",
          organization: "TNPSC",
          date: "To be announced",
          description:
            "Recruitment exam for Deputy Collector, DSP, and other top administrative posts in Tamil Nadu.",
          category: "government",
          applicationDeadline: "Expected soon",
          eligibilityAge: "21–37 years (varies by category)",
          recommendedFor: ["leadership", "administrative", "social-helpful"],
        },
        {
          name: "TNPSC Group 2",
          organization: "TNPSC",
          date: "To be announced",
          description:
            "Exam for various posts including Revenue Assistant, Sub-Registrar, and other state services.",
          category: "government",
          applicationDeadline: "Expected soon",
          eligibilityAge: "18–35 years (varies by category)",
          recommendedFor: ["administrative", "social-helpful"],
        },
        {
          name: "TNPSC Group 4",
          organization: "TNPSC",
          date: "To be announced",
          description:
            "Recruitment exam for clerical posts like Junior Assistant, Typist, and Village Administrative Officer.",
          category: "government",
          applicationDeadline: "Expected soon",
          eligibilityAge: "18–32 years (varies by category)",
          recommendedFor: ["clerical", "service-oriented"],
        },
        {
          name: "TRB Tamil Nadu TET",
          organization: "Teachers Recruitment Board (TRB), Tamil Nadu",
          date: "Multiple dates",
          description:
            "Teacher Eligibility Test for recruitment of teachers in Tamil Nadu schools.",
          category: "academic",
          applicationDeadline: "Ongoing/Announced yearly",
          eligibilityAge: "No upper age limit",
          recommendedFor: ["teaching", "social-helpful", "intellectual"],
        },
        {
          name: "Tamil Nadu Police SI Exam",
          organization: "TNUSRB",
          date: "To be announced",
          description:
            "Recruitment exam for Sub-Inspector posts in Tamil Nadu Police.",
          category: "defence",
          applicationDeadline: "Expected soon",
          eligibilityAge: "20–28 years (relaxation for reserved categories)",
          recommendedFor: ["defence", "leadership", "service-oriented"],
        },
      ];

      let filteredExams = [...examDatabase];
      let userQuizResults = null;

            function goBack() {
        if (document.referrer && document.referrer !== window.location.href) {
          window.history.back();
        } else {
          window.location.href = "/";
        }
      }
      // Load user data and quiz results
      function loadUserData() {
        const loggedInUser = JSON.parse(localStorage.getItem("loggedInUser"));
        if (loggedInUser) {
          const users = JSON.parse(localStorage.getItem("users")) || [];
          const user = users.find((u) => u.email === loggedInUser.email);
          if (user && user.name) {
            document.getElementById("userName").textContent = user.name;
            document.getElementById("userAvatar").textContent = user.name
              .charAt(0)
              .toUpperCase();
          }
        }
       
        // Load quiz results
        const quizResults = sessionStorage.getItem("quizResults");
        if (quizResults) {
          userQuizResults = JSON.parse(quizResults);
          showPersonalizedRecommendations();
        }
      }

      function showPersonalizedRecommendations() {
        if (!userQuizResults) return;

        const banner = document.getElementById("recommendationsBanner");
        const text = document.getElementById("recommendationsText");

        banner.classList.add("show");
        text.textContent = `Based on your "${
          userQuizResults.profileType
        }" profile, we've highlighted exams that align with your interests in ${userQuizResults.topCategories
          .slice(0, 2)
          .join(" and ")} fields.`;
      }

      function getMatchScore(exam) {
        if (!userQuizResults) return 0;

        let score = 0;
        const userCategories = userQuizResults.topCategories || [];

        // Check if exam is recommended for user's category combination
        const userCategoryKey = userCategories.slice(0, 2).join("-");
        if (exam.recommendedFor.includes(userCategoryKey)) {
          score += 40;
        }

        // Check individual category matches
        exam.recommendedFor.forEach((rec) => {
          userCategories.forEach((userCat) => {
            if (rec.includes(userCat)) {
              score += 15;
            }
          });
        });

        return Math.min(score, 100);
      }

      function isRecommendedExam(exam) {
        return getMatchScore(exam) >= 30;
      }

      function displayExams(exams) {
        const grid = document.getElementById("examsGrid");
        const noResults = document.getElementById("noResults");

        if (exams.length === 0) {
          grid.style.display = "none";
          noResults.style.display = "block";
          return;
        }

        grid.style.display = "grid";
        noResults.style.display = "none";

        // Sort exams: recommended first, then by date
        exams.sort((a, b) => {
          const aRecommended = isRecommendedExam(a);
          const bRecommended = isRecommendedExam(b);

          if (aRecommended && !bRecommended) return -1;
          if (!aRecommended && bRecommended) return 1;

          return a.date.localeCompare(b.date);
        });

        grid.innerHTML = exams
          .map((exam) => {
            const recommended = isRecommendedExam(exam);
            const matchScore = getMatchScore(exam);

            return `
                    <div class="exam-card ${recommended ? "recommended" : ""}">
                        <div class="exam-header">
                            <div>
                                <div class="exam-name">
                                    ${exam.name}
                                    ${
                                      matchScore > 0
                                        ? `<span class="match-score">${matchScore}% Match</span>`
                                        : ""
                                    }
                                </div>
                                <div class="exam-organization">${
                                  exam.organization
                                }</div>
                            </div>
                            <div class="exam-date">${exam.date}</div>
                        </div>
                        <div class="exam-description">${exam.description}</div>
                        <div class="exam-actions">
                            <a href="#" class="action-btn btn-primary" onclick="viewDetails('${
                              exam.name
                            }')">View Details</a>
                            <a href="#" class="action-btn btn-secondary" onclick="addReminder('${
                              exam.name
                            }')">Set Reminder</a>
                        </div>
                    </div>
                `;
          })
          .join("");
      }

      function searchExams() {
        const searchTerm = document
          .getElementById("searchInput")
          .value.toLowerCase();
        const activeFilter =
          document.querySelector(".filter-btn.active").dataset.filter;

        filteredExams = examDatabase.filter((exam) => {
          const matchesSearch =
            exam.name.toLowerCase().includes(searchTerm) ||
            exam.organization.toLowerCase().includes(searchTerm) ||
            exam.description.toLowerCase().includes(searchTerm);

          const matchesFilter =
            activeFilter === "all" ||
            (activeFilter === "recommended" && isRecommendedExam(exam)) ||
            exam.category === activeFilter;

          return matchesSearch && matchesFilter;
        });

        displayExams(filteredExams);
      }

      function filterExams(filterType) {
        // Update active filter button
        document.querySelectorAll(".filter-btn").forEach((btn) => {
          btn.classList.remove("active");
        });
        event.target.classList.add("active");

        // Apply filter
        if (filterType === "all") {
          filteredExams = [...examDatabase];
        } else if (filterType === "recommended") {
          filteredExams = examDatabase.filter((exam) =>
            isRecommendedExam(exam)
          );
        } else {
          filteredExams = examDatabase.filter(
            (exam) => exam.category === filterType
          );
        }

        displayExams(filteredExams);
      }

      function viewDetails(examName) {
        alert(
          `Detailed information for ${examName} would be shown here. This would typically navigate to a detailed exam page.`
        );
      }

      function addReminder(examName) {
        alert(
          `Reminder set for ${examName}! You'll receive notifications about important dates and updates.`
        );
      }

      // Event listeners
      document
        .getElementById("searchInput")
        .addEventListener("input", function () {
          if (this.value === "") {
            searchExams();
          }
        });

      document
        .getElementById("searchInput")
        .addEventListener("keypress", function (e) {
          if (e.key === "Enter") {
            searchExams();
          }
        });

      document.querySelectorAll(".filter-btn").forEach((btn) => {
        btn.addEventListener("click", function () {
          filterExams(this.dataset.filter);
        });
      });

      window.onload = function () {
        loadUserData();
        displayExams(examDatabase);
      };
    </script>
  </body>
</html>
